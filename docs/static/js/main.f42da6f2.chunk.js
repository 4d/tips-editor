(this["webpackJsonptips-editor"]=this["webpackJsonptips-editor"]||[]).push([[0],{199:function(e,t,n){},261:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),i=n.n(a),s=n(32),o=n.n(s),l=(n(199),n(13)),j=n(178),u=n.n(j),d=n(95),b=n(194),O=n(382),p=n(383);function f(e){return{type:r.SET_ITEMS,payload:e}}function h(e){return{type:r.REMOVE_ITEM,payload:e}}function m(e,t){return{type:r.SAVE_ITEM,payload:{item:e,index:t}}}function x(e){return{type:r.SET_CURRENT_ITEM,payload:e}}function y(e){return{type:r.FILTER_BY_KEY,payload:e}}!function(e){e.TEXT="text",e.VIDEO="video"}(c||(c={})),function(e){e.SET_CURRENT_ITEM="Edit item",e.REMOVE_ITEM="Remove item",e.SAVE_ITEM="SAVE item",e.SET_KEYS="Set Keys",e.SET_ITEMS="Set Items",e.FILTER_BY_KEY="Filter by key",e.FILTER_BY_TYPE="Filter by type"}(r||(r={}));var v="__TIPS__",g="https://raw.githubusercontent.com/4d/Web-studio-TIPS/main/tips.json",k={filter:{key:"",type:"*"},items:[],current:-1,keys:[]},E=n(193),T=n(10),S=n(47),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_KEYS:return Object(T.a)(Object(T.a)({},e),{},{keys:t.payload});case r.FILTER_BY_KEY:return Object(T.a)(Object(T.a)({},e),{},{filter:Object(T.a)(Object(T.a)({},e.filter),{},{key:t.payload})});case r.FILTER_BY_TYPE:return Object(T.a)(Object(T.a)({},e),{},{filter:Object(T.a)(Object(T.a)({},e.filter),{},{type:t.payload})});case r.SET_ITEMS:return Object(T.a)(Object(T.a)({},e),{},{items:Object(S.sortBy)(t.payload,["key"])});case r.REMOVE_ITEM:return Object(T.a)(Object(T.a)({},e),{},{items:Object(S.remove)(e.items,(function(e,n){return n!==t.payload}))});case r.SAVE_ITEM:var n=t.payload,c=n.index,a=n.item;return c>=e.items.length?Object(T.a)(Object(T.a)({},e),{},{current:-1,items:[].concat(Object(E.a)(e.items),[a])}):Object(T.a)(Object(T.a)({},e),{},{current:-1,items:e.items.map((function(e,t){return c===t?a:e}))});case r.SET_CURRENT_ITEM:return Object(T.a)(Object(T.a)({},e),{},{current:t.payload});default:return e}},N=n(3),C=Object(a.createContext)([k,function(){}]);C.displayName="Store";var I=function(){return Object(a.useContext)(C)},_=function(e){var t=e.children,n=Object(a.useReducer)(w,k),c=Object(l.a)(n,2),i=c[0],s=c[1];return Object(a.useEffect)((function(){localStorage.setItem(v,JSON.stringify(i.items))}),[i.items]),Object(a.useEffect)((function(){fetch("keys.json").then((function(e){return e.json()})).then((function(e){return s(function(e){return{type:r.SET_KEYS,payload:e}}(e))}))}),[]),Object(N.jsx)(C.Provider,{value:[i,s],children:t})},R=n(369),F=function(e){var t=e.show,n=e.onYes,c=e.title,r=void 0===c?"Confirm":c,a=e.children,i=e.yesLabel,s=void 0===i?"Yes":i,o=e.noLabel,l=void 0===o?"No":o,j=e.yesProps,u=void 0===j?{}:j,b=e.noProps,O=void 0===b?{}:b;function p(e){n&&n(e)}return Object(N.jsxs)(R.a,{show:t,onHide:function(){return p(!1)},children:[Object(N.jsx)(R.a.Header,{children:Object(N.jsx)(R.a.Title,{children:r})}),Object(N.jsx)(R.a.Body,{children:a}),Object(N.jsxs)(R.a.Footer,{children:[Object(N.jsx)(d.a,Object(T.a)(Object(T.a)({appearance:"primary"},u),{},{onClick:function(){return p(!0)},children:s})),Object(N.jsx)(d.a,Object(T.a)(Object(T.a)({appearance:"subtle"},O),{},{onClick:function(){return p(!1)},children:l}))]})]})},M=n(28),Y=n(378),V=(n(261),["children","active"]),L=function(e){var t=e.children,n=e.active,c=Object(M.a)(e,V);return Object(N.jsx)("div",Object(T.a)(Object(T.a)({className:"rs-item ".concat(n?"active":"")},c),{},{children:t}))},B=function(e){var t=e.path,n=void 0===t?"":t,c=e.onClick,r=e.className,i=void 0===r?"":r,s=e.style,o=void 0===s?{}:s,j=n.split(":"),u=Object(a.useState)(-1),d=Object(l.a)(u,2),b=d[0],O=d[1];return Object(N.jsx)(Y.a,{separator:"",style:o,className:"".concat(i," font-medium whitespace-nowrap"),children:j.map((function(e,t){var n=j.slice(0,t+1).join(":");return Object(N.jsx)(Y.a.Item,{renderItem:function(){return Object(N.jsx)(L,{onMouseEnter:function(){return O(t)},onMouseLeave:function(){return O(-1)},active:b>=t,onClick:function(){c&&c({value:n,index:t})},children:e})}},n)}))})},P=function(){var e=I(),t=Object(l.a)(e,2),n=t[0],i=n.items,s=n.filter,o=t[1],j=Object(a.useState)(!1),h=Object(l.a)(j,2),k=h[0],E=h[1],T=Object(a.useState)(!1),S=Object(l.a)(T,2),w=S[0],C=S[1],_=Object(a.useState)(!1),R=Object(l.a)(_,2),M=R[0],Y=R[1];Object(a.useEffect)((function(){var e=[];if(localStorage.getItem(v)){try{e=JSON.parse(localStorage.getItem(v)||"[]")}catch(t){e=[]}o(f(e))}else V()}),[]);var V=function(){Y(!0),fetch(g).then((function(e){return e.json()})).then((function(e){return o(f(e))})).finally((function(){return Y(!1)}))},L=["*",c.TEXT,c.VIDEO];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(F,{show:w,yesProps:{color:"red"},onYes:function(e){e&&V(),C(!1)},children:["Reloading the view will fetch the items from:",Object(N.jsx)("div",{className:"flex justify-center my-5",children:Object(N.jsx)("a",{target:"_blank",href:g,className:"bg-gray-500 text-xs p-1 rounded-md mx-1",rel:"noreferrer",children:g})}),Object(N.jsx)("span",{className:"text-red-400 underline",children:"All your changes will be lost. Do you want to proceed?"})]}),Object(N.jsxs)("div",{className:"w-full flex justify-between flex-row my-3",children:[Object(N.jsxs)("div",{className:"flex justify-center align-middle",children:[Object(N.jsx)(d.a,{onClick:function(){return C(!0)},children:Object(N.jsx)(b.a,{icon:"refresh",spin:M})}),Object(N.jsx)(O.a,{className:"mx-4",children:L.map((function(e){return Object(N.jsx)(d.a,{appearance:s.type===e?"primary":"default",onClick:function(){return o((t=e,{type:r.FILTER_BY_TYPE,payload:t}));var t},children:"*"===e?"All":Object(N.jsx)(b.a,{icon:e===c.TEXT?"code":"film"})})}))}),Object(N.jsx)(p.a,{className:"mr-4",icon:Object(N.jsx)(b.a,{icon:"plus"}),onClick:function(){o(m({body:"",key:"",type:c.TEXT},i.length)),o(x(i.length))}}),s.key?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(B,{path:s.key,onClick:function(e){var t=e.value;return o(y(t))}}),Object(N.jsx)(d.a,{appearance:"link",onClick:function(){return o(y(""))},children:"Clear"})]}):null]}),Object(N.jsx)("div",{className:"block",children:Object(N.jsx)(p.a,{appearance:k?"primary":"default",onClick:function(){return E(!k)},icon:Object(N.jsx)(b.a,{icon:"code"})})})]}),k?Object(N.jsx)(u.a,{style:{padding:10,borderRadius:6,marginBottom:12,border:"1px dashed gray"},src:i,theme:"solarized"}):null]})},D=n(384),A=n(379),K=n(385),H=n(370),q=n(386),J=n(376),X=n(373),U=n(371),z=n(380),G=n(92),W=function e(t){var n={};for(var c in t)if("object"!==typeof t[c]||Array.isArray(t[c]))n[c]=t[c];else{var r=e(t[c]);for(var a in r)n[c+"."+a]=r[a]}return n},$=["onChange","value","data"],Q=function(e){var t=e.onChange,n=e.value,c=void 0===n?"":n,r=e.data,a=void 0===r?[]:r,i=Object(M.a)(e,$);return Object(N.jsx)(O.a,{children:a.map((function(e){var n=e.icon,r=e.value;return Object(N.jsx)(p.a,Object(T.a)(Object(T.a)({},i),{},{icon:n?Object(N.jsx)(b.a,{icon:n}):void 0,onClick:function(e){return function(e,n){t&&t(e,n)}(r,e)},appearance:r===c?"primary":"default"}))}))})},Z=n(182),ee=["children"],te=function(e){var t=e.value,n=void 0===t?"":t;return Object(N.jsx)(Z.a,{options:{overrides:{a:{component:function(e){var t=e.children,n=Object(M.a)(e,ee);return Object(N.jsxs)("a",Object(T.a)(Object(T.a)({},n),{},{target:"_blank",rel:"noopener noreferrer",children:[t,Object(N.jsx)(b.a,{icon:"external-link",className:"ml-1"})]}))}}}},children:n})},ne=["value","className"],ce=function(e){var t=e.value,n=void 0===t?"":t,c=e.className,r=Object(M.a)(e,ne),i=Object(a.useState)(!1),s=Object(l.a)(i,2),o=s[0],j=s[1];return Object(N.jsxs)("div",{className:c,children:[Object(N.jsx)(Q,{style:{marginBottom:10},data:[{icon:"code",value:"code"},{icon:"eye",value:"preview"}],value:o?"preview":"code",onChange:function(e){return j("preview"===e)}}),o?Object(N.jsx)(te,{value:n}):Object(N.jsx)(G.a,Object(T.a)(Object(T.a)({},r),{},{value:n,componentClass:"textarea",placeholder:"Textarea"}))]})},re=D.a.Types.StringType,ae=function(){return Object(N.jsx)("hr",{style:{width:"80%",margin:"15px auto"}})},ie=D.a.Model({key:re().isRequired("The key is required").pattern(/^[0-9a-z]+(?::[0-9a-z]+)*$/),type:re().isOneOf([c.VIDEO,c.TEXT],"The specified type is unsupported").isRequired("The type is required"),body:re().isRequired("The content is required"),"video.link":re()}),se=function(){var e=I(),t=Object(l.a)(e,2),n=t[0],r=n.current,i=n.items,s=n.keys,o=t[1],j=Object(a.useState)({}),u=Object(l.a)(j,2),O=u[0],p=u[1],f=Object(a.useState)(),y=Object(l.a)(f,2),v=y[0],g=y[1],k=Object(a.useRef)(),E=Object(a.useMemo)((function(){return s.map((function(e){return e.value}))}),[s.length]);if(Object(a.useEffect)((function(){var e=i[r];e&&(g(W(e)),p({}))}),[i,r]),r<0||!i[r])return null;var T=function(){(null===v||void 0===v?void 0:v.key)||o(h(r)),o(x(-1))};return Object(N.jsxs)(A.a,{show:r>=0,onHide:T,children:[Object(N.jsx)(A.a.Header,{children:(null===v||void 0===v?void 0:v.key)?Object(N.jsx)(A.a.Title,{children:Object(N.jsx)(B,{path:v.key})}):null}),Object(N.jsx)(A.a.Body,{children:Object(N.jsxs)(K.a,{ref:function(e){return k.current=e},model:ie,autoComplete:"off",formValue:v,formError:O,onChange:function(e){return g(e)},onCheck:p,children:[Object(N.jsxs)(H.a,{children:[Object(N.jsx)(q.a,{children:"Key"}),Object(N.jsx)(J.a,{name:"key",accepter:X.a,data:E})]}),Object(N.jsxs)(H.a,{children:[Object(N.jsx)(q.a,{children:"Type"}),Object(N.jsxs)(J.a,{name:"type",accepter:U.a,appearance:"picker",style:{display:"flex",width:"fit-content",paddingRight:10},children:[Object(N.jsxs)(z.a,{value:c.TEXT,children:[Object(N.jsx)(b.a,{icon:"code",className:"mr-4"}),"Text"]}),Object(N.jsxs)(z.a,{value:c.VIDEO,children:[Object(N.jsx)(b.a,{icon:"code",className:"mr-4"}),"Video"]})]})]}),(null===v||void 0===v?void 0:v.type)===c.VIDEO?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ae,{}),Object(N.jsxs)(H.a,{children:[Object(N.jsx)(q.a,{children:"Url"}),Object(N.jsx)(J.a,{name:"video.link",accepter:G.a,style:{width:"100%"}})]})]}):null,Object(N.jsx)(H.a,{children:Object(N.jsx)(J.a,{name:"body",accepter:ce,rows:10,style:{width:"100%",minHeight:280},className:"w-full min-h-[326px]"})})]})}),Object(N.jsxs)(A.a.Footer,{children:[Object(N.jsx)(d.a,{onClick:function(){var e;return null===(e=k.current)||void 0===e?void 0:e.check((function(e){if(!Object.keys(e||{}).length){var t=function(e){var t={};for(var n in e)Object(S.set)(t,n,e[n]);return t}(v);o(m(t,r))}}))},appearance:"primary",children:"Confirm"}),Object(N.jsx)(d.a,{appearance:"subtle",onClick:T,children:"Cancel"})]})]})},oe=n(130),le=n.n(oe),je=n(189),ue=n(374),de=n(377),be={width:"100%",height:"100%"},Oe=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=I(),i=Object(l.a)(r,2)[1];return Object(N.jsx)(ue.a,{className:"w-full mb-3",draggable:!0,multiple:!1,fileList:n?[n]:[],autoUpload:!1,fileListVisible:!1,onChange:function(){var e=Object(je.a)(le.a.mark((function e(t){var n,r,a;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null===(n=t[0].blobFile)||void 0===n?void 0:n.text();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0="[]";case 7:r=e.t0,e.prev=8,a=JSON.parse(r),i(f(a)),e.next=17;break;case 13:return e.prev=13,e.t1=e.catch(8),de.a.error("Invalid JSON."),e.abrupt("return");case 17:c(null);case 18:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t){return e.apply(this,arguments)}}(),accept:"application/json",children:Object(N.jsx)("div",{style:be,children:"Click or Drag files to this area"})})},pe=n(372),fe=n(387),he=n(375),me=n(381),xe=n(388),ye=function(e){var t=e.show,n=e.onConfirm,c=e.item;return c?Object(N.jsxs)(F,{show:t,onYes:n,yesLabel:"Remove",noLabel:"Cancel",yesProps:{appearance:"primary",color:"red"},children:["Are you sure you want to remove the key:",Object(N.jsx)("span",{className:"bg-gray-500 text-xs p-1 rounded-md mx-1",children:c.key})," ","of type:",Object(N.jsx)("span",{className:"bg-gray-500 text-xs p-1 rounded-md mx-1",children:c.type}),"?"]}):null},ve=["top","left"],ge=function(e){var t=e.item;return Object(N.jsx)(pe.a,{preventOverflow:!0,placement:"auto",trigger:"click",speaker:function(e){var n=e.top,r=e.left,a=Object(M.a)(e,ve);return Object(N.jsx)(fe.a,Object(T.a)(Object(T.a)({title:t.title||"",style:{top:n,left:r}},a),{},{children:Object(N.jsxs)("article",{className:"prose text-left prose-sm overflow-auto p-1 max-h-80 text-sm",children:[t.type===c.VIDEO&&t.video.link?Object(N.jsx)("iframe",{height:200,width:"100%",src:t.video.link,title:t.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):null,Object(N.jsx)(te,{value:t.body})]})}))},children:Object(N.jsx)(b.a,{icon:function(){switch(t.type){case c.TEXT:return"code";case c.VIDEO:return"film";default:return"question"}}(),className:"text-gray-300 text-base cursor-pointer"})})},ke=function(){var e=I(),t=Object(l.a)(e,2),n=t[0],c=n.items,r=n.filter,i=n.keys,s=t[1],o=Object(a.useState)(-1),j=Object(l.a)(o,2),u=j[0],O=j[1],p=Object(a.useMemo)((function(){return i.map((function(e){return e.value}))}),[i]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye,{item:c[u],show:!!c[u],onConfirm:function(e){e&&s(h(u)),O(-1)}}),0===c.length?Object(N.jsxs)("div",{className:"text-center bg-[#292d33] border-dashed rounded-md border border-gray-200 p-3",children:["The list is empty. Please upload a valid"," ",Object(N.jsx)("span",{className:"bg-gray-500 p-1 text-xs rounded-md mx-1",children:"JSON file"})," ","or use"," ",Object(N.jsx)("a",{href:"tips.json",target:"_blank",children:"this example"})]}):null,Object(N.jsx)(he.a,{hover:!0,children:c.map((function(e,t){if(!e.key.startsWith(r.key)||"*"!==r.type&&e.type!==r.type)return null;var n=p.includes(e.key);return Object(N.jsx)(he.a.Item,{index:t,children:Object(N.jsxs)(me.a,{children:[Object(N.jsx)(me.a.Item,{colspan:2,className:"flex justify-center items-center h-16",children:Object(N.jsx)(ge,{item:e})}),Object(N.jsxs)(me.a.Item,{colspan:19,className:"flex flex-row h-16",children:[!n&&Object(N.jsx)(pe.a,{trigger:"hover",placement:"left",speaker:Object(N.jsx)(xe.a,{children:Object(N.jsx)("div",{className:"p-2",children:"Key not supported"})}),children:Object(N.jsx)(b.a,{icon:"info",className:"flex items-center mr-2 text-red-400 cursor-pointer"})}),Object(N.jsx)(B,{style:{marginLeft:n?22:"unset"},path:e.key,onClick:function(e){var t=e.value;return s(y(t))}})]}),Object(N.jsxs)(me.a.Item,{colspan:2,className:"flex justify-center items-center h-16",children:[Object(N.jsx)(d.a,{color:"orange",appearance:"link",onClick:function(){return O(t)},children:"Remove"}),Object(N.jsx)("span",{className:"p-1",children:"|"}),Object(N.jsx)(d.a,{appearance:"link",onClick:function(){return s(x(t))},children:"Edit"})]})]})},"".concat(e.key,":").concat(t))}))})]})},Ee=function(){return Object(N.jsxs)(_,{children:[Object(N.jsx)("a",{className:"github-fork-ribbon",href:"https://github.com/midrissi/tips-editor","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub",target:"_blank",rel:"noreferrer",children:"Fork me on GitHub"}),Object(N.jsxs)("div",{className:"max-w-7xl m-auto mt-4",children:[Object(N.jsx)(Oe,{}),Object(N.jsx)(P,{}),Object(N.jsx)(ke,{}),Object(N.jsx)(se,{})]})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,389)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};o.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(Ee,{})}),document.getElementById("root")),Te()}},[[366,1,2]]]);
//# sourceMappingURL=main.f42da6f2.chunk.js.map